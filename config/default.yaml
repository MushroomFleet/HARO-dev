# HARO Default Configuration
# Copy to ~/.config/haro/config.yaml and customize

haro:
  # Device identification
  device_id: "haro-default"
  
  # Wake word settings
  wake:
    phrase: "haro"
    sensitivity: 0.5          # 0.0-1.0, lower = more sensitive
    confirmation_sound: true  # Play chime on activation
    confirmation_phrases:     # Immediate response on wake word detection
      - "Hello, HARO?"
  
  # Audio settings
  audio:
    sample_rate: 16000        # 16kHz for speech
    channels: 1               # Mono
    chunk_size: 1024          # Samples per buffer
    input_device: null        # null = system default
    output_device: null       # null = system default
    buffer_duration: 2.0      # Rolling buffer for wake detection (seconds)
    
  # Voice activity detection
  vad:
    threshold: 0.5            # Energy threshold multiplier
    min_speech_duration: 0.5  # Minimum speech length (seconds)
    max_speech_duration: 30   # Maximum recording length (seconds)
    silence_duration: 3.0     # Stop recording after 3s of silence (for variable length prompts)
    noise_floor_adaptation: 0.05  # How quickly noise floor adapts
    
  # Speech-to-text (Whisper)
  stt:
    model: "base.en"          # base.en (~140MB, better accuracy), tiny.en (~75MB), small.en (~480MB)
    model_path: "~/.cache/haro/models/"
    language: "en"
    compute_type: "int8"      # int8 for CPU efficiency, float16 for GPU
    beam_size: 1              # 1 for speed, 5 for accuracy
    vad_filter: true          # Use Silero VAD for better segmentation
    
  # Text-to-speech
  tts:
    engine: "piper"           # piper (default), supertonic (when available)
    voice: "en_GB-southern_english_female-low"  # Piper voice model (British female)
    model_path: "~/.cache/haro/models/"
    speed: 1.0                # Speech rate multiplier
    volume: 0.8               # Output volume (0.0-1.0)

  # Feedback settings (canned responses and signoffs - 3rd person)
  feedback:
    transcription_phrases:    # Brief but clear confirmation after speech transcription
      - "HARO copies that"
      - "HARO received that"
      - "HARO acknowledges"
      - "HARO is processing"
    thinking_delay_threshold: 2.5  # Seconds before playing "thinking" phrase
    
  # API settings (cloud LLM via OpenRouter/Anthropic)
  # The ":online" suffix enables OpenRouter web search for up-to-date information
  api:
    provider: "google"
    model: "google/gemini-3-flash-preview:online"  # :online enables web search via OpenRouter
    max_tokens: 1024          # Maximum response tokens
    temperature: 0.7          # Response creativity (0.0-1.0)
    timeout: 30               # API timeout in seconds
    retry_attempts: 3         # Number of retries on failure
    retry_delay: 1.0          # Seconds between retries

  # Local LLM settings (Ollama)
  ollama:
    enabled: true             # Enable local LLM for simple queries
    model: "ministral:3b"     # Local model (configurable, run 'ollama list' to see available)
    base_url: "http://localhost:11434"
    timeout: 30               # Timeout for local LLM requests
    temperature: 0.7
    max_tokens: 512           # Keep responses concise
    cloud_keywords:           # Phrases that trigger cloud LLM (with web search via :online)
      - "ask claude"
      - "use claude"
      - "search the web"
      - "search online"
      - "look up online"
      - "current news"
      - "latest news"
      - "what's happening"
      - "complex"
      - "detailed"
      - "explain in depth"

  # Context settings
  context:
    path: ".context/"         # Relative to working directory
    history_turns: 10         # Conversation turns to include in context
    session_timeout: 300      # Seconds of inactivity before new session
    auto_save: true           # Automatically save sessions
    max_context_tokens: 4000  # Maximum tokens for assembled context
    
  # Logging
  logging:
    level: "INFO"             # DEBUG, INFO, WARNING, ERROR
    file: "~/.local/share/haro/logs/haro.log"
    console: true             # Also log to console
    max_file_size: 10485760   # 10MB
    backup_count: 5           # Number of log files to keep

  # Commands - local commands that don't need API
  commands:
    stop:
      - "stop"
      - "be quiet"
      - "shut up"
    repeat:
      - "repeat that"
      - "say that again"
      - "what did you say"
    new_session:
      - "new conversation"
      - "start over"
      - "forget that"
    sleep:
      - "go to sleep"
      - "sleep mode"
    goodbye:
      - "goodbye"
      - "bye"
      - "see you"
    time:
      - "what time is it"
      - "what's the time"
    volume_up:
      - "louder"
      - "volume up"
      - "speak up"
    volume_down:
      - "quieter"
      - "volume down"
      - "speak softer"
